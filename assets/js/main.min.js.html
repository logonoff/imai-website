---
permalink: /assets/js/main.min.js
layout: compress
---
{% comment %} Import tab escape sequence {% endcomment %}
{% include_relative tab.html %}

{% comment %} Import main.js file to minify {% endcomment %}
{% capture js %}
	{% include_relative /vendor/jquery-parallax.js %}
	{% include_relative /vendor/quicklink.umd.js %}
	{% include_relative /main.js %}
{% endcapture %}

{% comment %} Assign JS to array {% endcomment %}
{% assign jsFile = js | newline_to_br | split: '<br />' %}

{% comment %} Assign output var {% endcomment %}
{% assign output = "" %}

{% comment %} Remove all single line comments {% endcomment %}
{% comment %} The way this works is pretty dumb, it is not aware if the "//" is part of a string,
			therefore all "//" that is in a string must be escaped {% endcomment %}
{% for lineOfJS in jsFile %}
	{% if lineOfJS contains "//" %}

		{% assign withoutComment = lineOfJS | split: '//' %}

		{% assign output = output | append: withoutComment[0] %}

	{% else %}
		{% assign output = output | append: lineOfJS %}
	{% endif %}
{% endfor %}

{% comment %} Remove newlines and tab {% endcomment %}
{% assign output = output | strip_newlines | remove: tab %}

{% comment %} Remove block comments {% endcomment %}
{% comment %} based on work by penibelst in jekyll-compress-html (MIT) {% endcomment %}
{% comment %} https://github.com/penibelst/jekyll-compress-html/blob/db5818b0f0b30e34e406149aedade8e3bb68511f/src/compress.liquid {% endcomment %}
{% assign _comment_befores = output | split: "/*" %}
{% for _comment_before in _comment_befores %}
	{% assign _comment_content = _comment_before | split: "*/" | first %}
	{% if _comment_content %}
		{% capture _comment %}{{ "/*" }}{{ _comment_content }}{{ "*/" }}{% endcapture %}
		{% assign output = output | remove: _comment %}
	{% endif %}
{% endfor %}

{% comment %} output + header {% endcomment %}
"use strict";

/*
 * Imai Japanese Cuisine
 * includes jquery-parallax: https://ianlunn.co.uk/plugins/jquery-parallax/
 */

{{ output }}
